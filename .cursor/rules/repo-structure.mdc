---
description: This is the project structure for this monorepo
alwaysApply: true
---

<project_structure>

- Monorepo managed with bun + Vercel + Turborepo; TypeScript across apps and packages
- Directory Structure:

```text
/
├── apps/
│   ├── web/           # Next.js frontend app
│   ├── backend/       # Serverless backend (Vercel)
│   ├── storybook/     # Storybook for UI components
│   └── docs/          # (Optional) Fumadocs-powered docs app
├── packages/
│   ├── design/        # Shared design system (Radix/shadcn, Tailwind v4)
│   ├── config/        # Shared runtime config + environment helpers
│   ├── constants/     # Shared constants (plans, etc.)
│   ├── schemas/       # Shared Zod schemas (validation/forms)
│   ├── logs/          # Logging utilities (backend only)
│   ├── ai/            # AI utilities/integration
│   ├── analytics/     # Analytics utilities (PostHog)
│   ├── seo/           # SEO helpers and metadata
│   ├── utils/         # General utilities (formatting, time, etc.)
│   ├── email/         # Email helpers
│   └── tsconfig/      # Shared TypeScript config
├── scripts/           # Project init, Stripe setup, migrations, etc.
├── templates/         # Scaffolding templates for new packages/apps
├── prompts/           # Prompt files for AI-assisted workflows
├── turbo.json         # Turborepo pipeline config
└── README.md
```

</project_structure>

<apps_overview>

- `apps/web`:
  - Next.js (TypeScript), Tailwind CSS v4, `@repo/design` components
  - tRPC React client + TanStack Query; Jotai for global state
  - Better Auth client integration; PostHog analytics and sourcemaps
  - Deployed to Vercel
- `apps/backend`:
  - tRPC server
  - Prisma with Postgres, Stripe integration, Better Auth server
  - Vitest for backend tests; migrations and DB helpers under `scripts/`
  - Deployed to Vercel as serverless functions
- `apps/storybook`:
  - Storybook configuration and stories for UI components
- `apps/docs` (optional):
  - Next.js + Fumadocs for documentation
  - Deployed to Vercel

</apps_overview>

<packages_overview>

- `@repo/design`: Component library (Radix/shadcn), theming, global styles
- `@repo/config`: Shared configuration and env accessors (web + backend variants)
- `@repo/constants`: Shared constants (e.g., plans)
- `@repo/schemas`: Zod schemas for validation
- `@repo/logs`: Logging utilities (backend only)
- `@repo/ai`: AI utilities (backend only)
- `@repo/analytics`: Analytics utilities (PostHog)
- `@repo/seo`: SEO helpers and metadata
- `@repo/utils`: General utilities (formatting, time, etc.)
- `@repo/email`: Email helpers

</packages_overview>

<infra_overview>

- Deployment configuration managed through Vercel
- Each app has its own `vercel.json` for Vercel-specific configuration
- Environment variables are managed via Vercel's dashboard or CLI

</infra_overview>

<testing_overview>

- Backend: Vitest with in-memory SQLite for realistic integration testing
- Web: Vitest for unit tests; Playwright for end-to-end tests

</testing_overview>
